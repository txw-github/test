[Skip to content](https://github.com/txw-github/test#start-of-content)

[txw-github](https://github.com/txw-github)/ **[test](https://github.com/txw-github/test)** Public

- [Notifications](https://github.com/login?return_to=%2Ftxw-github%2Ftest) You must be signed in to change notification settings
- [Fork\\
0](https://github.com/login?return_to=%2Ftxw-github%2Ftest)
- [Star\\
0](https://github.com/login?return_to=%2Ftxw-github%2Ftest)


[0\\
stars](https://github.com/txw-github/test/stargazers) [0\\
forks](https://github.com/txw-github/test/forks) [Branches](https://github.com/txw-github/test/branches) [Tags](https://github.com/txw-github/test/tags) [Activity](https://github.com/txw-github/test/activity)

[Star](https://github.com/login?return_to=%2Ftxw-github%2Ftest)

[Notifications](https://github.com/login?return_to=%2Ftxw-github%2Ftest) You must be signed in to change notification settings

# txw-github/test

main

[Branches](https://github.com/txw-github/test/branches) [Tags](https://github.com/txw-github/test/tags)

[Go to Branches page](https://github.com/txw-github/test/branches)[Go to Tags page](https://github.com/txw-github/test/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>## History<br>[56 Commits](https://github.com/txw-github/test/commits/main/)<br>[View commit history for this file.](https://github.com/txw-github/test/commits/main/) |
| [attached\_assets](https://github.com/txw-github/test/tree/main/attached_assets "attached_assets") | [attached\_assets](https://github.com/txw-github/test/tree/main/attached_assets "attached_assets") |  |  |
| [.replit](https://github.com/txw-github/test/blob/main/.replit ".replit") | [.replit](https://github.com/txw-github/test/blob/main/.replit ".replit") |  |  |
| [README.md](https://github.com/txw-github/test/blob/main/README.md "README.md") | [README.md](https://github.com/txw-github/test/blob/main/README.md "README.md") |  |  |
| [README\_RTX3060Ti.md](https://github.com/txw-github/test/blob/main/README_RTX3060Ti.md "README_RTX3060Ti.md") | [README\_RTX3060Ti.md](https://github.com/txw-github/test/blob/main/README_RTX3060Ti.md "README_RTX3060Ti.md") |  |  |
| [README\_简易使用指南.md](https://github.com/txw-github/test/blob/main/README_%E7%AE%80%E6%98%93%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md "README_简易使用指南.md") | [README\_简易使用指南.md](https://github.com/txw-github/test/blob/main/README_%E7%AE%80%E6%98%93%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md "README_简易使用指南.md") |  |  |
| [batch\_convert.bat](https://github.com/txw-github/test/blob/main/batch_convert.bat "batch_convert.bat") | [batch\_convert.bat](https://github.com/txw-github/test/blob/main/batch_convert.bat "batch_convert.bat") |  |  |
| [batch\_convert.py](https://github.com/txw-github/test/blob/main/batch_convert.py "batch_convert.py") | [batch\_convert.py](https://github.com/txw-github/test/blob/main/batch_convert.py "batch_convert.py") |  |  |
| [install\_dependencies.bat](https://github.com/txw-github/test/blob/main/install_dependencies.bat "install_dependencies.bat") | [install\_dependencies.bat](https://github.com/txw-github/test/blob/main/install_dependencies.bat "install_dependencies.bat") |  |  |
| [install\_guide.md](https://github.com/txw-github/test/blob/main/install_guide.md "install_guide.md") | [install\_guide.md](https://github.com/txw-github/test/blob/main/install_guide.md "install_guide.md") |  |  |
| [main.py](https://github.com/txw-github/test/blob/main/main.py "main.py") | [main.py](https://github.com/txw-github/test/blob/main/main.py "main.py") |  |  |
| [output.srt](https://github.com/txw-github/test/blob/main/output.srt "output.srt") | [output.srt](https://github.com/txw-github/test/blob/main/output.srt "output.srt") |  |  |
| [quick\_start.bat](https://github.com/txw-github/test/blob/main/quick_start.bat "quick_start.bat") | [quick\_start.bat](https://github.com/txw-github/test/blob/main/quick_start.bat "quick_start.bat") |  |  |
| [requirements.txt](https://github.com/txw-github/test/blob/main/requirements.txt "requirements.txt") | [requirements.txt](https://github.com/txw-github/test/blob/main/requirements.txt "requirements.txt") |  |  |
| [test\_installation.py](https://github.com/txw-github/test/blob/main/test_installation.py "test_installation.py") | [test\_installation.py](https://github.com/txw-github/test/blob/main/test_installation.py "test_installation.py") |  |  |
| [test\_system.py](https://github.com/txw-github/test/blob/main/test_system.py "test_system.py") | [test\_system.py](https://github.com/txw-github/test/blob/main/test_system.py "test_system.py") |  |  |
| [使用说明.md](https://github.com/txw-github/test/blob/main/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md "使用说明.md") | [使用说明.md](https://github.com/txw-github/test/blob/main/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md "使用说明.md") |  |  |
| [使用说明\_完整版.md](https://github.com/txw-github/test/blob/main/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E_%E5%AE%8C%E6%95%B4%E7%89%88.md "使用说明_完整版.md") | [使用说明\_完整版.md](https://github.com/txw-github/test/blob/main/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E_%E5%AE%8C%E6%95%B4%E7%89%88.md "使用说明_完整版.md") |  |  |
| [快速转换.bat](https://github.com/txw-github/test/blob/main/%E5%BF%AB%E9%80%9F%E8%BD%AC%E6%8D%A2.bat "快速转换.bat") | [快速转换.bat](https://github.com/txw-github/test/blob/main/%E5%BF%AB%E9%80%9F%E8%BD%AC%E6%8D%A2.bat "快速转换.bat") |  |  |
| View all files |

## Repository files navigation

# 视频转字幕工具 \- 多模型支持版

[Permalink: 视频转字幕工具 - 多模型支持版](https://github.com/txw-github/test#%E8%A7%86%E9%A2%91%E8%BD%AC%E5%AD%97%E5%B9%95%E5%B7%A5%E5%85%B7---%E5%A4%9A%E6%A8%A1%E5%9E%8B%E6%94%AF%E6%8C%81%E7%89%88)

## 系统要求

[Permalink: 系统要求](https://github.com/txw-github/test#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82)

- **操作系统**: Windows 10/11
- **显卡**: NVIDIA RTX 3060 Ti (6GB显存)
- **CUDA**: 12.1版本
- **Python**: 3.8-3.11
- **显存**: 至少4GB可用显存

## 安装步骤

[Permalink: 安装步骤](https://github.com/txw-github/test#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4)

### 1\. 安装Python

[Permalink: 1. 安装Python](https://github.com/txw-github/test#1-%E5%AE%89%E8%A3%85python)

- 从官网下载Python 3.8-3.11版本
- 安装时勾选"Add Python to PATH"
- 验证安装：在命令行输入 `python --version`

### 2\. 安装CUDA和驱动

[Permalink: 2. 安装CUDA和驱动](https://github.com/txw-github/test#2-%E5%AE%89%E8%A3%85cuda%E5%92%8C%E9%A9%B1%E5%8A%A8)

- 确保NVIDIA驱动是最新版本
- CUDA 12.1应该已经包含在驱动中
- 验证：在命令行输入 `nvidia-smi`

### 3\. 安装FFmpeg（可选）

[Permalink: 3. 安装FFmpeg（可选）](https://github.com/txw-github/test#3-%E5%AE%89%E8%A3%85ffmpeg%E5%8F%AF%E9%80%89)

- 下载FFmpeg Windows版本
- 解压到 `C:\ffmpeg`
- 将 `C:\ffmpeg\bin` 添加到环境变量PATH

### 4\. 运行安装脚本

[Permalink: 4. 运行安装脚本](https://github.com/txw-github/test#4-%E8%BF%90%E8%A1%8C%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC)

双击运行 `install_windows.bat` 文件，它会自动安装所有依赖。

### 5\. 手动安装（如果脚本失败）

[Permalink: 5. 手动安装（如果脚本失败）](https://github.com/txw-github/test#5-%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E5%A6%82%E6%9E%9C%E8%84%9A%E6%9C%AC%E5%A4%B1%E8%B4%A5)

```
# 升级pip
python -m pip install --upgrade pip

# 安装PyTorch (CUDA 12.1)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# 安装核心依赖
pip install openai-whisper faster-whisper transformers
pip install moviepy librosa soundfile numpy scipy
pip install modelscope tqdm psutil

# 可选：TensorRT加速（需要NVIDIA账号）
pip install tensorrt --extra-index-url https://pypi.ngc.nvidia.com
pip install pycuda
```

## 使用方法

[Permalink: 使用方法](https://github.com/txw-github/test#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)

### 基本用法

[Permalink: 基本用法](https://github.com/txw-github/test#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95)

```
# 使用默认base模型
python main.py 视频文件.mp4

# 指定输出文件
python main.py 视频文件.mp4 --output 字幕.srt

# 选择模型
python main.py 视频文件.mp4 --model large
```

### 支持的模型

[Permalink: 支持的模型](https://github.com/txw-github/test#%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B)

#### Whisper系列

[Permalink: Whisper系列](https://github.com/txw-github/test#whisper%E7%B3%BB%E5%88%97)

- `tiny`: 最快，精度较低，显存需求最小
- `base`: 平衡选择，适合RTX 3060 Ti
- `small`: 更高精度，需要更多显存
- `medium`: 高精度，建议有8GB+显存
- `large`: 最高精度，需要大量显存

#### Faster-Whisper系列（推荐）

[Permalink: Faster-Whisper系列（推荐）](https://github.com/txw-github/test#faster-whisper%E7%B3%BB%E5%88%97%E6%8E%A8%E8%8D%90)

- `faster-base`: 比原版base快5倍
- `faster-large`: 比原版large快5倍

#### FireRedASR系列（中文优化）

[Permalink: FireRedASR系列（中文优化）](https://github.com/txw-github/test#fireredasr%E7%B3%BB%E5%88%97%E4%B8%AD%E6%96%87%E4%BC%98%E5%8C%96)

- `firered-aed`: 中文语音识别优化
- `firered-llm`: 基于大语言模型的ASR

### 参数说明

[Permalink: 参数说明](https://github.com/txw-github/test#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E)

```
python main.py [视频文件] [选项]

选项:
  --output, -o      输出字幕文件路径 (默认: output.srt)
  --model, -m       模型选择 (默认: base)
  --device, -d      设备选择 (cuda/cpu, 默认: cuda)
  --language, -l    语言设置 (默认: zh)
  --keep-temp       保留临时音频文件
```

### 使用示例

[Permalink: 使用示例](https://github.com/txw-github/test#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B)

## 单文件处理

[Permalink: 单文件处理](https://github.com/txw-github/test#%E5%8D%95%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86)

```
# 处理中文电视剧，使用faster-whisper
python main.py 电视剧.mkv --model faster-base --output 电视剧字幕.srt

# 使用中文优化模型
python main.py 中文视频.mp4 --model chinese-whisper-base --language zh

# 使用base模型获得平衡效果
python main.py 重要视频.mp4 --model base --output 高质量字幕.srt
```

## 批量处理目录

[Permalink: 批量处理目录](https://github.com/txw-github/test#%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95)

```
# 批量处理整个目录
python main.py --input-dir ./videos --output-dir ./subtitles --model faster-base

# 处理多层级目录结构（保持目录结构）
python main.py --input-dir ./电视剧 --output-dir ./字幕 --model chinese-whisper-base

# 使用图形界面批量处理
python batch_convert.py

# 或者使用批处理脚本（Windows）
batch_convert.bat
```

## 性能优化建议

[Permalink: 性能优化建议](https://github.com/txw-github/test#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE)

### RTX 3060 Ti 6GB显存优化

[Permalink: RTX 3060 Ti 6GB显存优化](https://github.com/txw-github/test#rtx-3060-ti-6gb%E6%98%BE%E5%AD%98%E4%BC%98%E5%8C%96)

1. **推荐模型**: `faster-base`, `base`, `firered-aed`
2. **避免使用**: `large`, `medium`（显存不足）
3. **如果显存不足**: 使用 `--device cpu` 切换到CPU模式

### 加速设置

[Permalink: 加速设置](https://github.com/txw-github/test#%E5%8A%A0%E9%80%9F%E8%AE%BE%E7%BD%AE)

1. **启用混合精度**: 自动启用FP16加速
2. **TensorRT加速**: 安装TensorRT后自动启用
3. **批处理**: 长音频自动分块处理

## 常见问题

[Permalink: 常见问题](https://github.com/txw-github/test#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)

### 1\. CUDA内存不足

[Permalink: 1. CUDA内存不足](https://github.com/txw-github/test#1-cuda%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3)

```
解决方案：
- 使用更小的模型 (tiny, base)
- 切换到CPU模式: --device cpu
- 关闭其他占用显存的程序

```

### 2\. 模型下载失败

[Permalink: 2. 模型下载失败](https://github.com/txw-github/test#2-%E6%A8%A1%E5%9E%8B%E4%B8%8B%E8%BD%BD%E5%A4%B1%E8%B4%A5)

```
解决方案：
- 检查网络连接
- 使用代理或镜像源
- 手动下载模型文件

```

### 3\. 音频提取失败

[Permalink: 3. 音频提取失败](https://github.com/txw-github/test#3-%E9%9F%B3%E9%A2%91%E6%8F%90%E5%8F%96%E5%A4%B1%E8%B4%A5)

```
解决方案：
- 安装FFmpeg
- 检查视频文件格式
- 确保视频文件完整

```

### 4\. 转录质量不佳

[Permalink: 4. 转录质量不佳](https://github.com/txw-github/test#4-%E8%BD%AC%E5%BD%95%E8%B4%A8%E9%87%8F%E4%B8%8D%E4%BD%B3)

```
解决方案：
- 使用更大的模型
- 调整音频质量
- 使用专门的中文模型 (firered-aed)

```

## 支持的文件格式

[Permalink: 支持的文件格式](https://github.com/txw-github/test#%E6%94%AF%E6%8C%81%E7%9A%84%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)

### 视频格式

[Permalink: 视频格式](https://github.com/txw-github/test#%E8%A7%86%E9%A2%91%E6%A0%BC%E5%BC%8F)

- MP4, AVI, MOV, MKV, WMV, FLV, WEBM

### 音频格式

[Permalink: 音频格式](https://github.com/txw-github/test#%E9%9F%B3%E9%A2%91%E6%A0%BC%E5%BC%8F)

- WAV, MP3, AAC, FLAC, OGG

### 输出格式

[Permalink: 输出格式](https://github.com/txw-github/test#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F)

- SRT字幕文件

## 技术特性

[Permalink: 技术特性](https://github.com/txw-github/test#%E6%8A%80%E6%9C%AF%E7%89%B9%E6%80%A7)

- ✅ 多模型支持 (Whisper, FireRedASR)
- ✅ GPU加速 (CUDA, TensorRT)
- ✅ 自动显存管理
- ✅ 长音频分块处理
- ✅ 中文优化
- ✅ 自动音频预处理
- ✅ 错误恢复机制

## 更新日志

[Permalink: 更新日志](https://github.com/txw-github/test#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97)

### v1.0.0

[Permalink: v1.0.0](https://github.com/txw-github/test#v100)

- 支持多种ASR模型
- 优化GPU显存使用
- 添加TensorRT加速
- 完善错误处理
- 支持长音频处理

## 许可证

[Permalink: 许可证](https://github.com/txw-github/test#%E8%AE%B8%E5%8F%AF%E8%AF%81)

MIT License

## 技术支持

[Permalink: 技术支持](https://github.com/txw-github/test#%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81)

如有问题请查看日志文件 `video_subtitle.log` 获取详细错误信息。

## About

No description, website, or topics provided.


### Resources

[Readme](https://github.com/txw-github/test#readme-ov-file)

[Activity](https://github.com/txw-github/test/activity)

### Stars

[**0**\\
stars](https://github.com/txw-github/test/stargazers)

### Watchers

[**0**\\
watching](https://github.com/txw-github/test/watchers)

### Forks

[**0**\\
forks](https://github.com/txw-github/test/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Ftxw-github%2Ftest&report=txw-github+%28user%29)

## [Releases](https://github.com/txw-github/test/releases)

No releases published

## [Packages](https://github.com/users/txw-github/packages?repo_name=test)

No packages published

## Languages

- [Python92.0%](https://github.com/txw-github/test/search?l=python)
- [Batchfile8.0%](https://github.com/txw-github/test/search?l=batchfile)